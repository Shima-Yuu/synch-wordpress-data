# synch-wordpress-data

## 概要

作業者間のローカル環境のデータを同期させます。  
投稿を HTML で管理し、ターム・カスタムフィールド・メディアを json にて管理します。  
ソースにて更新作業を行うため、Git 管理が可能になり、下記のメリットがあります。

- 変更履歴を容易に追える
  - 変更日時 / 作業者の特定が容易になります
  - ブランチ毎に更新をすれば、作業範囲（影響範囲）がわかりやすくなります
- Wordpress のインポーターを使ってのバグの解消
  - メディアライブラリ ⇨ インポート可能に
  - ACF で作成したフィールド(繰り返し等)の値 ⇨ 設定された状態でインポート可能に
  - アイキャッチ画像 ⇨ 設定された状態でインポート可能に

## 機能

### インポート機能

- テーマ配下の HTML ファイルから自動で投稿を更新
- ターム情報の追加 / 更新
- カスタムフィールドの追加 / 更新
- メディアの追加 / 更新

### エクスポート機能

- テーマ配下に投稿の HTML ファイルを作成
- json ファイル(投稿情報、ターム情報、メディア情報)の作成 / 更新
- メディアのディレクトリ / ファイル作成

## インポート/ エクスポート時の注意点

- ACF のフィールドグループは、ACF プラグインからインポートする。
- 上記のインポートをしてから Synch Wordpress Data のインポートを実行する。
- トップページは必ずスラッグを top と設定する(top 以外で設定すると動作しないです)

## 仕様

インポート / エクスポートを行うと、下記のディレクリが **テーマ配下** に作成されます。

### data

各 json ファイルとメディアライブラリを管理するディレクトリになります。  
| ディレクトリ名 | 概要 |
| ---- | ---- |
| json | 各 json ファイルを管理 |
| media | メディアライブラリを管理 |

| ファイル名 | 概要                                                                           |
| ---------- | ------------------------------------------------------------------------------ |
| tax.json   | タクソノミー別にターム情報を管理                                               |
| posts.json | 固定ページ / カスタム投稿の投稿を管理<br>アイキャッチ画像 / タームの設定を管理 |
| media.json | メディアライブラリ情報を管理                                                   |
| acf.json   | ACF プラグインのエクスポート時に出力される json<br>ACF の各フィールドを管理    |

### logs

処理のログを記録します。  
投稿 / ターム / メディア別にログを記録します。

下記 2 ファイルが作成されます。  
(接頭辞).day(今日の日にち).log  
(接頭辞)\_.lock.day(今日の日にち).log

### WP

固定ページ / カスタム投稿の HTML を管理するディレクトリになります。  
| ディレクトリ名 | 概要 |
| ---- | ---- |
| pages | 固定ページを管理<br>親ページがある時は、ディレクトリにまとめてます |
| post_type | カスタム投稿の投稿を管理<br>カスタム投稿別にディレクトリにまとめてます |
